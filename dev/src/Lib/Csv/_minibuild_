CSV_VERSION := "3.0.3"
CSV_DIR := file('libcsv-{CSV_VERSION}')
CSV_URL := 'http://downloads.sourceforge.net/project/libcsv/libcsv/libcsv-{CSV_VERSION}/libcsv-{CSV_VERSION}.tar.gz'

CSV_DIR => fun() do
	execute("wget -nv", CSV_URL, "-O- | tar xvzP")
end

file("libcsv.c")[CSV_DIR] => fun() do
	execute("cp", CSV_DIR/"libcsv.c", ".")
end

file("csv.h")[CSV_DIR] => fun() do
	execute("cp", CSV_DIR/"csv.h", ".")
end

riva_module("Csv/Parser", [file("Parser.o"), file("libcsv.o")])