LINENOISE_VERSION = "1.0"
LINENOISE_URL = "https://github.com/antirez/linenoise/archive/" .. LINENOISE_VERSION .. ".tar.gz"
local LINENOISE_DIR = file("linenoise")
LINENOISE_SOURCE = file("linenoise.c")
LINENOISE_HEADER = file("linenoise.h")

LINENOISE_SOURCE:build(function()
	execute{"mkdir -p", LINENOISE_DIR}
	execute{"cd", LINENOISE_DIR, "&&",
		"wget --user-agent=\"Firefox/3.6.12\" -nv", LINENOISE_URL, "-O- | tar xvzP --strip-components=1"
	}
	execute{"cp", LINENOISE_DIR/"linenoise.c", "."}
	execute{"cp", LINENOISE_DIR/"linenoise.h", "."}
end)

scope("linenoise", function()
	file("Linenoise.o"){LINENOISE_SOURCE}:build(c_compile)
	riva_module("Util/Linenoise", {file("Linenoise.o"), file("linenoise.o")})
end)