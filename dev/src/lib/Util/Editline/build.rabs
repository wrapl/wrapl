var EDITLINE_URL := "http://thrysoee.dk/editline/libedit-20160903-3.1.tar.gz"
var EDITLINE_DIR := file("libedit")

file("libedit.a") => fun() do
	EDITLINE_DIR:rmdir:mkdir:chdir
	execute("wget -nv", EDITLINE_URL, "-O- | tar xvzP --strip-components=1")
	execute("./configure --disable-shared --enable-static",
		'--prefix={BUILDDIR}',
		'--libdir={BUILDDIR}',
		"--without-man-pages",
		'CFLAGS=\"{LIBCFLAGS}\"',
		'LDFLAGS=\"{LIBLDFLAGS}\"'
	)
	execute("make clean")
	execute("make TARGET_LIBS=\"static\"")
	execute("make install")
end

CFLAGS := old + ["-I", file("include")]
LDFLAGS := old + ["Riva/Memory.rlib"]
file("Editline.o")[file("libedit.a")]
riva_module("Util/Editline", [file("Editline.o")], [file("libedit.a")])
