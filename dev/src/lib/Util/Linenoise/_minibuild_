LINENOISE_VERSION := "1.0"
LINENOISE_URL := 'https://github.com/antirez/linenoise/archive/{LINENOISE_VERSION}.tar.gz'
LINENOISE_DIR := file("linenoise")
LINENOISE_SOURCE := file("linenoise.c")
LINENOISE_HEADER := file("linenoise.h")

LINENOISE_SOURCE => fun() do
	print(LINENOISE_DIR, "\n")
	mkdir(LINENOISE_DIR)
	execute("cd", LINENOISE_DIR, "&&",
		"wget --user-agent=\"Firefox/3.6.12\" -nv", LINENOISE_URL, "-O- | tar xvzP --strip-components=1"
	)
	(LINENOISE_DIR/"linenoise.c"):copy(LINENOISE_SOURCE)
	(LINENOISE_DIR/"linenoise.h"):copy(LINENOISE_HEADER)
end

file("Linenoise.o")[LINENOISE_SOURCE]
riva_module("Util/Linenoise", [file("Linenoise.o"), file("linenoise.o")])